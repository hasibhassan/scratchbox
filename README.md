<h1 align="center">
  <br>
  <a href="https://main.d2u87gtuc012bu.amplifyapp.com/"><img src="../scratchbox/public/logo-black.svg" alt="Vision logo" width="100"></a>
  <br>
  Scratchbox
  <br>
</h1>

<h4 align="center">An online IDE scratchpad</h4>

<p align="center">
  <a>
    <img src="https://img.shields.io/badge/license-MIT-blue.svg"
         alt="Gitter">
  </a>
  <a href="https://main.d2u87gtuc012bu.amplifyapp.com/"><img src="https://img.shields.io/badge/Demo-online-brightgreen"></a>
</p>

Scratchbox is a full stack React app built with Next.js and written in TypeScript. The backend is hosted on AWS and built with AWS Amplify using AWS AppSync for the GraphQL API, AWS Lambda for the compute layer, and DynamoDB for the database.

The project's aim is to let users experiment with React code in an online IDE which autosaves allowing users to use the IDE as a scratchpad that they can access from anywhere.

## Technologies Used

- [Next.js](https://github.com/vercel/next.js/) as the React framework
- [TypeScript](https://www.typescriptlang.org/) for writing type-safe source code
- [GraphQL](https://graphql.org/) as the data query and manipulation language for the backend API
- [TailwindCSS](https://github.com/tailwindlabs/tailwindcss) for writing utility-first CSS styles
- [AWS Amplify](https://github.com/aws-amplify/amplify-js) for interfacing with backend cloud infrastructure

## Navigating this project

- [Components and styling](./components)
- [GraphQL data model](./src)
- [Autosaving and debounce logic](./components/ui/Prettier.tsx)
- [Data fetching logic](./utils/fetchCode.ts)
- [Updating user data logic](./utils/updateCode.ts)
- [Cypress test spec](./cypress/integration/test.spec.js)

## My workflow

- Each feature branch merged into the production-ready main branch triggered an AWS CodeBuild CI/CD job to build and push the production build to S3 and invalidate the CloudFront cache
- Most of the backend infrastructure is declaratively provisioned using CloudFormation templates which were generated by AWS Amplify's CLI tool. The infrastructure-as-code templates were also checked into version control and deployed in the CI/CD pipeline
- I used TypeScript for type checking and also setup and wrote test samples using Cypress for E2E tests as well as Testing Library/Jest for integration tests.

## Features

- Complete user auth flow:

  - Create account
  - Sign in to account
  - Forgot password reset request to email
  - Forgot password confirmation code submit

- Uses a bundler to transpile React and TypeScript (`.tsx` files) code to let users preview the code from the code editor.
- Formats the code in the code editor automatically on code change and autosaves as well
- Implements CRUD functionality with authenticated Amazon AppSync GraphQL API calls to AWS Lambda resolvers to spin up an ephemeral function container to handle the request. AWS Lambda makes calls to the DynamoDB NoSQL database and formats the data to send back to the client thru AppSync. Amazon Cognito is used as the auth and user management service. This highly available and redundant infrastructure ensure users can access their data anywhere, anytime. All of the backend AWS services used are serverless which makes for an on-demand, pay-per-request billing model.

## Available Scripts

Install all dependencies:

```shell
npm i
```

Start the development server on port 3000

```shell
npm run dev
```

Generate a production build:

```shell
npm run build
```
